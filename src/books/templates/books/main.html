{% extends 'base.html' %}
{% load static %}
{% load widget_tweaks %}
{% block scripts %}
  <script src="{% static 'books/main.js' %}" defer></script>
{% endblock scripts %}
{% block title %}
  Book Title List
{% endblock title %}
{% block content %}
  {% comment %} {% if form.non_field_errors %}
{% for error in form.non_field_errors %}
    <div class="font-bold text-xl text-red-400">{{ error }}</div>
{% endfor %}
  {% endif %} {% endcomment %}
  {% if messages %}
    {% for message in messages %}
      {% if 'info' in message.tags %}
        {% include 'components/alert.html' with is_info=True title="Success" body=message %}
      {% elif 'error' in message.tags %}
        {% include 'components/alert.html' with is_info=False title="Error" body=message %}
      {% endif %}
    {% endfor %}
  {% endif %}
  {% include 'components/header.html' with title="Book titles" description="List of all the book titles available" %}
  {% for letter in letters %}
    <a href="{% url 'books:main' letter|lower %}"
       class="{% if letter == selected_letter|upper %}underline{% endif %}">{{ letter }}</a>
  {% endfor %}
  <form action="" method="post">
    {% csrf_token %}
    <div class="mb-2">
      <label for="{{ form.title.id_for_label }}"
             class="block font-bold text-slate-800 dark:text-slate-300">title:</label>
      {{ form.title|add_class:'bg-slate-100 dark:bg-slate-300 text-slate-800 rounded p-2 w-full' }}
    </div>
    <div class="mb-2">
      <label for="{{ form.author.id_for_label }}"
             class="block font-bold text-slate-800 dark:text-slate-300">author:</label>
      {{ form.author|add_class:'bg-slate-100 dark:bg-slate-300 text-slate-800 rounded p-2 w-full' }}
      {% if form.title.errors %}
        {% for error in form.title.errors %}<div class="my-1 text-red-500 font-bold text-sm">{{ error }}</div>{% endfor %}
      {% endif %}
    </div>
    <div class="mb-2">
      <label for="{{ form.publisher.id_for_label }}"
             class="block font-bold text-slate-800 dark:text-slate-300">publisher:</label>
      {{ form.publisher|add_class:'bg-slate-100 dark:bg-slate-300 text-slate-800 rounded p-2 w-full' }}
    </div>
    <button type="submit" class="p-3 bg-blue-500 text-white">Submit</button>
  </form>
  {% if qs %}
    <ul>
      {% for el in qs %}
        <li>
          <a href="{{ el.get_absolute_url }}">{{ el.title }}</a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <div>
      no book titles staring with <b>{{ selected_letter }}</b>
    </div>
  {% endif %}
{% endblock %}
